# Sistema IPTV - Plataforma de Streaming AvanÃ§ada

Um sistema completo de IPTV desenvolvido com tecnologias modernas, oferecendo uma experiÃªncia completa de streaming com interface moderna e responsiva.

## âœ¨ Funcionalidades Principais

### ğŸ¥ Sistema de Streaming
- ReproduÃ§Ã£o de canais ao vivo em alta qualidade
- Suporte a mÃºltiplas resoluÃ§Ãµes (SD, HD, FHD, 4K)
- AdaptaÃ§Ã£o automÃ¡tica da qualidade baseada na conexÃ£o
- Controles avanÃ§ados de reproduÃ§Ã£o
- Picture-in-Picture (PIP)
- Closed Captions e legendas
- Timeshift para programaÃ§Ã£o ao vivo

### ğŸ“º Gerenciamento de ConteÃºdo
- OrganizaÃ§Ã£o por categorias (Filmes, SÃ©ries, Esportes, etc)
- Sistema de favoritos personalizado
- HistÃ³rico de visualizaÃ§Ã£o
- ContinuaÃ§Ã£o automÃ¡tica de reproduÃ§Ã£o
- Filtros avanÃ§ados de busca
- Tags e metadados personalizados

### ğŸ“± Interface Multi-Plataforma
- Design responsivo para todos dispositivos
- Temas claro/escuro
- Layout personalizÃ¡vel
- Atalhos de teclado
- Modo TV para smart TVs
- Controle remoto virtual

### ğŸ® Controles e PersonalizaÃ§Ã£o
- Ajuste de qualidade manual/automÃ¡tico
- Controle de volume avanÃ§ado
- Modos de visualizaÃ§Ã£o (normal, wide, stretch)
- PersonalizaÃ§Ã£o de buffer
- Ajustes de Ã¡udio (equalizaÃ§Ã£o, balanÃ§o)
- ConfiguraÃ§Ãµes de rede

### ğŸ“Š Sistema de RecomendaÃ§Ã£o
- RecomendaÃ§Ãµes baseadas em histÃ³rico
- ConteÃºdo relacionado
- TendÃªncias e populares
- Descoberta de novos conteÃºdos
- Perfis de interesse
- RecomendaÃ§Ãµes sazonais

### ğŸ” Preview e InformaÃ§Ãµes
- Miniaturas dinÃ¢micas
- InformaÃ§Ãµes detalhadas do conteÃºdo
- ClassificaÃ§Ã£o e reviews
- ProgramaÃ§Ã£o futura
- Detalhes tÃ©cnicos da transmissÃ£o
- InformaÃ§Ãµes do EPG

### ğŸ“‹ Gerenciamento de Listas
- ImportaÃ§Ã£o de mÃºltiplos formatos
- ValidaÃ§Ã£o automÃ¡tica de canais
- Backup e sincronizaÃ§Ã£o
- OrganizaÃ§Ã£o personalizada
- Compartilhamento de listas
- AtualizaÃ§Ãµes automÃ¡ticas

### âš™ï¸ ConfiguraÃ§Ãµes AvanÃ§adas
- Ajustes de cache
- ConfiguraÃ§Ãµes de rede
- Perfis de qualidade
- PersonalizaÃ§Ã£o da interface
- Backup e restauraÃ§Ã£o
- Logs e diagnÃ³sticos

## ğŸ‘‘ Painel Administrativo

### ğŸ›ï¸ Dashboard Principal
- VisÃ£o geral do sistema
- MÃ©tricas em tempo real
- GrÃ¡ficos de performance
- Alertas e notificaÃ§Ãµes
- KPIs principais
- Status dos serviÃ§os

### ğŸ‘¥ GestÃ£o de UsuÃ¡rios
- Gerenciamento de contas
- NÃ­veis de acesso
- SuspensÃ£o/Banimento
- HistÃ³rico de atividades
- Logs de acesso
- GestÃ£o de permissÃµes

### ğŸ“º GestÃ£o de ConteÃºdo
- Gerenciamento de canais
- CategorizaÃ§Ã£o de conteÃºdo
- ModeraÃ§Ã£o de conteÃºdo
- Upload de EPG
- GestÃ£o de metadados
- Agendamento de conteÃºdo

### ğŸ’³ GestÃ£o Financeira
- Controle de assinaturas
- HistÃ³rico de pagamentos
- RelatÃ³rios financeiros
- GestÃ£o de planos
- Cupons e descontos
- IntegraÃ§Ãµes com gateways

### ğŸ” Monitoramento
- Status dos servidores
- Monitoramento de streams
- Logs do sistema
- Alertas automÃ¡ticos
- MÃ©tricas de qualidade
- DiagnÃ³stico de problemas

### ğŸ“Š RelatÃ³rios AvanÃ§ados
- RelatÃ³rios personalizados
- ExportaÃ§Ã£o de dados
- AnÃ¡lise de audiÃªncia
- MÃ©tricas de engajamento
- RelatÃ³rios de erro
- TendÃªncias de uso

### âš™ï¸ ConfiguraÃ§Ãµes do Sistema
- ConfiguraÃ§Ãµes gerais
- Limites do sistema
- Blacklist/Whitelist
- Regras de cache
- PolÃ­ticas de seguranÃ§a
- Backup do sistema

### ğŸ› ï¸ Ferramentas de ManutenÃ§Ã£o
- Limpeza de cache
- OtimizaÃ§Ã£o de banco
- VerificaÃ§Ã£o de links
- Testes automÃ¡ticos
- Ferramentas de debug
- ManutenÃ§Ã£o programada

### ğŸ“¨ ComunicaÃ§Ã£o
- Sistema de mensagens
- NotificaÃ§Ãµes em massa
- Templates de email
- Avisos do sistema
- Suporte ao usuÃ¡rio
- FAQ gerenciÃ¡vel

### ğŸ”’ Controle de Acesso
- Roles e permissÃµes
- AutenticaÃ§Ã£o em 2 fatores
- Logs de atividade
- PolÃ­ticas de senha
- SessÃµes ativas
- Bloqueio de IP

### ğŸ“± GestÃ£o Multi-plataforma
- Controle de versÃµes
- AtualizaÃ§Ãµes do sistema
- ConfiguraÃ§Ãµes por plataforma
- Recursos especÃ­ficos
- Compatibilidade
- Release notes

### ğŸŒ GestÃ£o de Servidores
- Load balancing
- GestÃ£o de recursos
- Escalabilidade
- RedundÃ¢ncia
- ManutenÃ§Ã£o
- Backups

## ğŸš€ Stack TecnolÃ³gico Detalhado

### Frontend
- **React 18**
  - Context API para gerenciamento de estado
  - Hooks personalizados para lÃ³gica reutilizÃ¡vel
  - React Query para cache e gerenciamento de dados
  - React Router v6 para navegaÃ§Ã£o

- **TypeScript**
  - Tipagem estrita
  - Interfaces bem definidas
  - Generics para componentes reutilizÃ¡veis

- **UI/UX**
  - Chakra UI para componentes base
  - Radix UI para primitivos acessÃ­veis
  - Tailwind CSS para estilizaÃ§Ã£o
  - Framer Motion para animaÃ§Ãµes
  - Plyr para player de vÃ­deo personalizado

### Backend
- **Supabase**
  - AutenticaÃ§Ã£o de usuÃ¡rios
  - Armazenamento de metadados
  - Realtime subscriptions
  - Row Level Security

- **Express.js**
  - Middleware personalizado
  - Roteamento avanÃ§ado
  - Tratamento de erros
  - Logging detalhado

- **Processamento de MÃ­dia**
  - FFmpeg para transcodificaÃ§Ã£o
  - HLS.js para streaming adaptativo
  - Chunks otimizados
  - Qualidade adaptativa

## ğŸ“Š Sistema de EstatÃ­sticas e OtimizaÃ§Ã£o de Carregamento

### Painel Administrativo Aprimorado

O painel administrativo foi aprimorado com um sistema completo de estatÃ­sticas que fornece insights detalhados sobre o conteÃºdo disponÃ­vel no banco de dados e o que estÃ¡ carregado no sistema.

#### Funcionalidades de EstatÃ­sticas

- **VisÃ£o Geral de ConteÃºdo**:
  - ExibiÃ§Ã£o do total de registros no banco de dados
  - Contagem de registros carregados no sistema
  - Percentual de carregamento por categoria
  - Monitoramento em tempo real do progresso de carregamento

- **Detalhamento por Categoria**:
  - Filmes: total no banco vs. carregados
  - SÃ©ries: total no banco vs. carregadas
  - TV ao Vivo: total no banco vs. carregados
  - Barras de progresso visuais para cada categoria

- **Carregamento Sob Demanda**:
  - BotÃ£o para carregar mais conteÃºdo diretamente do painel
  - Indicadores de progresso durante o carregamento
  - AtualizaÃ§Ã£o automÃ¡tica das estatÃ­sticas apÃ³s carregamento

### OtimizaÃ§Ãµes de Desempenho

Para lidar com grandes volumes de dados (100MB+ de links), implementamos diversas otimizaÃ§Ãµes:

#### Carregamento Eficiente de Dados

- **PaginaÃ§Ã£o Otimizada**:
  - Carregamento de conteÃºdo em lotes menores
  - Tamanho de pÃ¡gina ajustÃ¡vel para equilibrar desempenho e experiÃªncia
  - Suporte para navegaÃ§Ã£o entre pÃ¡ginas de conteÃºdo

- **Carregamento por Categorias**:
  - SeparaÃ§Ã£o do carregamento por tipo de conteÃºdo (filmes, sÃ©ries, TV ao vivo)
  - PriorizaÃ§Ã£o de conteÃºdo mais acessado
  - Carregamento contextual baseado na navegaÃ§Ã£o do usuÃ¡rio

- **VirtualizaÃ§Ã£o de Listas**:
  - RenderizaÃ§Ã£o apenas dos itens visÃ­veis na tela
  - Suporte para listas longas sem impacto no desempenho
  - Rolagem suave mesmo com milhares de itens

#### Monitoramento e DiagnÃ³stico

- **Logs Detalhados**:
  - Sistema de logging abrangente para diagnÃ³stico
  - Monitoramento do progresso de carregamento
  - DetecÃ§Ã£o e relatÃ³rio de erros

- **VerificaÃ§Ã£o de Integridade**:
  - ValidaÃ§Ã£o de dados carregados
  - DetecÃ§Ã£o de inconsistÃªncias
  - RecuperaÃ§Ã£o automÃ¡tica de falhas

### Arquitetura de Dados

- **Armazenamento Eficiente**:
  - OtimizaÃ§Ã£o do formato de dados para reduzir overhead
  - CompressÃ£o de dados quando apropriado
  - NormalizaÃ§Ã£o para evitar duplicaÃ§Ã£o

- **Consultas Otimizadas**:
  - Consultas seletivas que buscam apenas os dados necessÃ¡rios
  - Ãndices otimizados no banco de dados
  - Caching de consultas frequentes

### Como Usar o Sistema de EstatÃ­sticas

1. Acesse o painel administrativo em `/admin`
2. Visualize as estatÃ­sticas gerais na seÃ§Ã£o "EstatÃ­sticas de ConteÃºdo"
3. Consulte o detalhamento por categoria na tabela abaixo
4. Use o botÃ£o "Carregar Mais ConteÃºdo" para carregar dados adicionais
5. Acompanhe o progresso atravÃ©s das barras de progresso

### SoluÃ§Ã£o de Problemas de Carregamento

Se o sistema nÃ£o estiver carregando todos os dados do banco:

1. Verifique os logs no console do navegador para identificar possÃ­veis erros
2. Confirme se o limite de paginaÃ§Ã£o estÃ¡ configurado corretamente
3. Verifique se hÃ¡ filtros ativos que possam estar limitando os resultados
4. Tente carregar categorias especÃ­ficas em vez de todo o conteÃºdo de uma vez
5. Monitore o uso de memÃ³ria do navegador durante o carregamento

### ConsideraÃ§Ãµes TÃ©cnicas

- O sistema foi projetado para lidar com mais de 100.000 registros
- A paginaÃ§Ã£o e virtualizaÃ§Ã£o permitem uma experiÃªncia fluida mesmo com grandes volumes de dados
- As estatÃ­sticas sÃ£o atualizadas em tempo real conforme o conteÃºdo Ã© carregado
- O armazenamento local Ã© otimizado para evitar problemas de limite de tamanho

## ğŸ¬ Sistema AvanÃ§ado de Players

### Arquitetura de Players Especializados

Nossa aplicaÃ§Ã£o implementa um sistema de players especializados para diferentes tipos de conteÃºdo, garantindo a melhor experiÃªncia possÃ­vel para cada formato:

#### ğŸ“º VideoPlayer (TV ao vivo)

O VideoPlayer Ã© especializado em streaming ao vivo utilizando tecnologias HLS:

- **CaracterÃ­sticas**:
  - Implementado com HLS.js para processamento de fluxos .m3u8
  - ConfiguraÃ§Ã£o adaptativa para streaming em tempo real
  - Otimizado para baixa latÃªncia e reconexÃ£o automÃ¡tica
  - DetecÃ§Ã£o e tratamento de interrupÃ§Ãµes de stream
  - Modo de recuperaÃ§Ã£o para falhas de rede
  - Suporte para segmentos MPEG-TS

- **ConfiguraÃ§Ãµes de Performance**:
  - `enableWorker: true` para processamento em thread separada
  - `lowLatencyMode: true` para minimizar delay
  - `backBufferLength: 30` para economia de memÃ³ria
  - Tratamento avanÃ§ado de erros de rede e mÃ­dia

#### ğŸ¥ VODPlayer (Filmes e SÃ©ries)

O VODPlayer Ã© otimizado para conteÃºdo sob demanda (Video On Demand):

- **CaracterÃ­sticas**:
  - Acesso direto Ã  fonte MP4 sem necessidade de proxy
  - ExtraÃ§Ã£o automÃ¡tica da URL original a partir de URLs de proxy
  - Player HTML5 nativo para mÃ¡xima compatibilidade
  - Interface com indicadores de carregamento
  - Sistema de recuperaÃ§Ã£o de erros com botÃ£o de retry
  - Mensagens de erro amigÃ¡veis

- **Vantagens**:
  - Carregamento mais rÃ¡pido e direto dos vÃ­deos
  - Menor uso de recursos do servidor
  - Melhor compatibilidade com diversos formatos MP4
  - ExperiÃªncia mais fluida para conteÃºdo VOD

### Sistema Inteligente de DetecÃ§Ã£o de ConteÃºdo

A plataforma detecta automaticamente o tipo de conteÃºdo e seleciona o player mais adequado:

- **DetecÃ§Ã£o AutomÃ¡tica**:
  - IdentificaÃ§Ã£o do tipo de conteÃºdo (filme, sÃ©rie, TV ao vivo)
  - SeleÃ§Ã£o do player apropriado baseado no tipo
  - ConfiguraÃ§Ã£o automÃ¡tica de parÃ¢metros especÃ­ficos

- **Tratamento Especializado**:
  - TV ao vivo: VideoPlayer com HLS.js e proxy de streaming
  - Filmes/SÃ©ries: VODPlayer com acesso direto MP4

## ğŸ”„ Sistema de Proxy Duplo para Streaming

### Arquitetura de Proxy Especializado

Nossa plataforma utiliza um sistema de proxy duplo, com servidores dedicados para diferentes tipos de conteÃºdo:

#### ğŸ“¡ Live Proxy (Porta 3001)

Servidor proxy especializado em conteÃºdo de TV ao vivo:

- **CaracterÃ­sticas**:
  - Otimizado para streaming contÃ­nuo e de baixa latÃªncia
  - Headers especializados para CORS e seguranÃ§a
  - Suporte a diversos formatos de streaming ao vivo
  - Tratamento de redirecionamentos e autenticaÃ§Ã£o
  - VerificaÃ§Ã£o de URLs para formato adequado

- **Funcionalidades**:
  - Endpoint `/stream` para transmissÃ£o de conteÃºdo ao vivo
  - Endpoint `/direct` para acesso direto com headers otimizados
  - Endpoint `/generate-url` para URLs alternativas de canais
  - Health check para monitoramento de status

#### ğŸï¸ VOD Proxy (Porta 3002)

Servidor proxy especializado em conteÃºdo sob demanda (filmes e sÃ©ries):

- **CaracterÃ­sticas**:
  - Otimizado para arquivos MP4 e conteÃºdo VOD
  - Sistema de cache para melhor desempenho
  - ConversÃ£o opcional via FFmpeg para compatibilidade
  - Stream controlado de arquivos grandes
  - Gerenciamento de conexÃµes ativas

- **Funcionalidades**:
  - Cache de streams para economia de largura de banda
  - ConversÃ£o sob demanda de formatos nÃ£o suportados
  - Limpeza automÃ¡tica de streams inativos
  - EstatÃ­sticas de uso e monitoramento

### Gerenciamento Centralizado de Proxies

O sistema inicia e gerencia automaticamente ambos os proxies:

- **Controle Unificado**:
  - InicializaÃ§Ã£o automÃ¡tica de ambos os servidores
  - Monitoramento de status e reinicializaÃ§Ã£o em caso de falha
  - Logs unificados para diagnÃ³stico de problemas
  - Encerramento gracioso em caso de shutdown

- **ConfiguraÃ§Ã£o FlexÃ­vel**:
  - VariÃ¡veis de ambiente para portas dos serviÃ§os
  - Facilidade de manutenÃ§Ã£o e atualizaÃ§Ã£o
  - TolerÃ¢ncia a falhas com reinicializaÃ§Ã£o automÃ¡tica
  - Compatibilidade com ambiente de produÃ§Ã£o e desenvolvimento

## ğŸ“‹ Uso do Sistema

### Para UsuÃ¡rios Finais

1. **Navegando no ConteÃºdo**:
   - Acesse `/movies` para filmes
   - Acesse `/series` para sÃ©ries de TV
   - Acesse `/live` para canais de TV ao vivo

2. **Assistindo ConteÃºdo**:
   - Clique em "Assistir" em qualquer item para iniciar a reproduÃ§Ã£o
   - Para filmes e sÃ©ries: reproduÃ§Ã£o direta sem proxy
   - Para TV ao vivo: reproduÃ§Ã£o via HLS com proxy de streaming

3. **Recursos durante a ReproduÃ§Ã£o**:
   - Controles padrÃ£o (play/pause, volume, fullscreen)
   - OpÃ§Ãµes de qualidade de vÃ­deo (quando disponÃ­vel)
   - Status de carregamento e bufferizaÃ§Ã£o

### Para Desenvolvedores

1. **Iniciando os Servidores**:
   ```bash
   # Na pasta v20/src/server
   node --loader tsx start-proxies.ts
   ```

2. **Portas dos ServiÃ§os**:
   - Live Proxy (TV ao vivo): `http://localhost:3001`
   - VOD Proxy (Filmes/SÃ©ries): `http://localhost:3002`

3. **Principais Endpoints**:
   - `/stream?url=URL_ENCODED_STREAM` - Para iniciar streaming de conteÃºdo
   - `/health` - Para verificar status dos servidores
   - `/hls/STREAM_ID/index.m3u8` - Para acessar playlists HLS geradas

4. **VariÃ¡veis de Ambiente**:
   - `LIVE_PROXY_PORT` - Porta para o proxy de TV ao vivo (padrÃ£o: 3001)
   - `PROXY_PORT` - Porta para o proxy VOD (padrÃ£o: 3002)
   - `VITE_LIVE_PROXY_URL` - URL base para o proxy de TV ao vivo
   - `VITE_VOD_PROXY_URL` - URL base para o proxy VOD

## ğŸ”§ ManutenÃ§Ã£o e SoluÃ§Ã£o de Problemas

### Problemas Comuns e SoluÃ§Ãµes

1. **VÃ­deo nÃ£o carrega**:
   - Para TV ao vivo: verifique se o proxy na porta 3001 estÃ¡ rodando
   - Para filmes/sÃ©ries: verifique se a URL MP4 original estÃ¡ acessÃ­vel

2. **Erro de CORS**:
   - Verifique se os headers de CORS estÃ£o corretamente configurados nos proxies
   - Teste acesso direto Ã  URL de mÃ­dia para confirmar disponibilidade

3. **Alto uso de CPU/memÃ³ria**:
   - Verifique nÃºmero de streams ativos no painel de administraÃ§Ã£o
   - Considere ajustar parÃ¢metros de buffer e qualidade para streams frequentes

4. **Problemas de proxy**:
   - Verifique logs de cada servidor proxy para diagnosticar erros especÃ­ficos
   - Reinicie os servidores proxy se necessÃ¡rio

### Logs e Monitoramento

Os proxies geram logs detalhados com informaÃ§Ãµes importantes:

- **Formato dos Logs**:
  - `[VOD Proxy]` ou `[Live Proxy]` prefixando cada mensagem
  - Timestamp implÃ­cito nos logs
  - Detalhes da operaÃ§Ã£o ou erro ocorrido

- **NÃ­veis de Log**:
  - Informativo: operaÃ§Ãµes normais
  - Aviso: problemas nÃ£o crÃ­ticos
  - Erro: falhas que requerem atenÃ§Ã£o

## ğŸ“‹ Requisitos Detalhados

### Requisitos de Sistema
- Node.js v18.0.0 ou superior
- FFmpeg v4.4 ou superior
- MÃ­nimo 4GB de RAM
- Armazenamento recomendado: 50GB+
- ConexÃ£o de internet estÃ¡vel (100Mbps+ recomendado)

### Requisitos de Desenvolvimento
- Git
- VS Code (recomendado)
- ExtensÃµes recomendadas:
  - ESLint
  - Prettier
  - TypeScript + Webpack Problem Matchers
  - Tailwind CSS IntelliSense

## ğŸ› ï¸ Guia de InstalaÃ§Ã£o Detalhado

1. **PreparaÃ§Ã£o do Ambiente**
```bash
# Verifique a versÃ£o do Node.js
node --version  # Deve ser 18.0.0 ou superior

# Verifique a instalaÃ§Ã£o do FFmpeg
ffmpeg -version

# Clone o repositÃ³rio
git clone [url-do-seu-repositorio]
cd project

# Instale as dependÃªncias
npm install
```

2. **ConfiguraÃ§Ã£o do Ambiente**
```bash
# Copie o arquivo de exemplo de ambiente
cp .env.example .env

# Estrutura do .env
VITE_SUPABASE_URL=sua_url_do_supabase
VITE_SUPABASE_ANON_KEY=sua_chave_anonima
VITE_API_URL=http://localhost:3000
VITE_PROXY_PORT=3001
VITE_VOD_PROXY_PORT=3002
VITE_LIVE_PROXY_PORT=3003
VITE_PLAYLIST_PROXY_PORT=3004
```

3. **ConfiguraÃ§Ã£o do FFmpeg**
```bash
# InstalaÃ§Ã£o automÃ¡tica do FFmpeg
node install-ffmpeg.js

# VerificaÃ§Ã£o da instalaÃ§Ã£o
ffmpeg -encoders  # Deve listar os encoders disponÃ­veis
```

## ğŸ® Scripts e Comandos Detalhados

### Desenvolvimento
```bash
# Inicia o ambiente de desenvolvimento completo
npm run dev  # Inicia frontend + todos os proxies

# Inicia servidores proxy individualmente
npm run proxy:vod     # Inicia servidor VOD
npm run proxy:live    # Inicia servidor Live
npm run proxy:playlist # Inicia servidor Playlist

# Desenvolvimento frontend apenas
npm run dev:frontend  # Inicia apenas o frontend
```

### Build e ProduÃ§Ã£o
```bash
# Build do projeto
npm run build        # Cria build otimizada
npm run build:analyze # Cria build com anÃ¡lise de bundle

# Preview da build
npm run preview      # Visualiza build local
```

### Testes e Qualidade
```bash
# Executa testes
npm run test        # Roda todos os testes
npm run test:watch  # Roda testes em modo watch
npm run test:coverage # Gera relatÃ³rio de cobertura

# Linting e FormataÃ§Ã£o
npm run lint       # Executa ESLint
npm run format     # Formata cÃ³digo com Prettier
```

## ğŸ“ Estrutura do Projeto Detalhada

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/          # Componentes de UI bÃ¡sicos
â”‚   â”‚   â”œâ”€â”€ player/      # Componentes do player
â”‚   â”‚   â”œâ”€â”€ layout/      # Componentes de layout
â”‚   â”‚   â””â”€â”€ shared/      # Componentes compartilhados
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ auth/        # Contexto de autenticaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ player/      # Contexto do player
â”‚   â”‚   â””â”€â”€ theme/       # Contexto de tema
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ player/      # Hooks relacionados ao player
â”‚   â”‚   â”œâ”€â”€ auth/        # Hooks de autenticaÃ§Ã£o
â”‚   â”‚   â””â”€â”€ api/         # Hooks de API
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ auth/        # PÃ¡ginas de autenticaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ player/      # PÃ¡ginas do player
â”‚   â”‚   â””â”€â”€ admin/       # PÃ¡ginas administrativas
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api/         # ServiÃ§os de API
â”‚   â”‚   â”œâ”€â”€ storage/     # ServiÃ§os de armazenamento
â”‚   â”‚   â””â”€â”€ analytics/   # ServiÃ§os de analytics
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ slices/      # Slices de estado
â”‚   â”‚   â””â”€â”€ middleware/  # Middleware personalizado
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ global/      # Estilos globais
â”‚   â”‚   â””â”€â”€ themes/      # Temas da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ api/         # Tipos da API
â”‚   â”‚   â”œâ”€â”€ player/      # Tipos do player
â”‚   â”‚   â””â”€â”€ common/      # Tipos comuns
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ format/      # UtilitÃ¡rios de formataÃ§Ã£o
â”‚       â”œâ”€â”€ validation/  # UtilitÃ¡rios de validaÃ§Ã£o
â”‚       â””â”€â”€ helpers/     # Helpers diversos
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ proxy/          # Servidores proxy
â”‚   â”œâ”€â”€ middleware/     # Middleware do servidor
â”‚   â””â”€â”€ utils/          # UtilitÃ¡rios do servidor
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ assets/        # Recursos estÃ¡ticos
â”‚   â””â”€â”€ icons/         # Ãcones
â””â”€â”€ supabase/
    â”œâ”€â”€ migrations/    # MigraÃ§Ãµes do banco
    â””â”€â”€ functions/     # FunÃ§Ãµes do Supabase
```

## ğŸ”§ ConfiguraÃ§Ãµes AvanÃ§adas

### ConfiguraÃ§Ã£o do Player
```typescript
// Exemplo de configuraÃ§Ã£o do player
const playerConfig = {
  quality: {
    default: '720p',
    options: ['1080p', '720p', '480p', '360p']
  },
  buffering: {
    initialBuffer: 5,  // segundos
    bufferWhilePaused: true
  },
  controls: {
    autohide: 3000,   // ms
    keyboard: true
  }
};
```

### ConfiguraÃ§Ã£o dos Proxies
```javascript
// Exemplo de configuraÃ§Ã£o de proxy
const proxyConfig = {
  // ConfiguraÃ§Ã£o do proxy VOD
  vod: {
    port: process.env.VOD_PROXY_PORT,
    cache: {
      enabled: true,
      maxAge: 3600  // 1 hora
    },
    cors: {
      origin: '*',
      methods: ['GET', 'HEAD']
    }
  },
  // ConfiguraÃ§Ã£o do proxy Live
  live: {
    port: process.env.LIVE_PROXY_PORT,
    bufferSize: 1024 * 1024,  // 1MB
    timeout: 30000  // 30 segundos
  }
};
```

## ğŸ“Š Monitoramento e Logs

### Logs do Sistema
- Logs de acesso
- Logs de erro
- Logs de performance
- MÃ©tricas de streaming

### Monitoramento
- Uso de CPU/MemÃ³ria
- LatÃªncia de rede
- Taxa de erro
- Qualidade do streaming

## ğŸ”’ SeguranÃ§a

### AutenticaÃ§Ã£o
- JWT Tokens
- Refresh Tokens
- Rate Limiting
- ProteÃ§Ã£o contra CSRF

### Streaming
- URLs assinadas
- Tokens de acesso
- Criptografia de stream
- ProteÃ§Ã£o contra hotlinking

## ğŸ“ˆ Performance

### OtimizaÃ§Ãµes Frontend
- Code Splitting
- Lazy Loading
- Caching
- CompressÃ£o de assets

### OtimizaÃ§Ãµes Backend
- Load Balancing
- Caching em memÃ³ria
- OtimizaÃ§Ã£o de queries
- CompressÃ£o de resposta

## ğŸŒ Deploy

### PreparaÃ§Ã£o
1. ConfiguraÃ§Ã£o de variÃ¡veis de ambiente
2. Build otimizada
3. Testes de integraÃ§Ã£o
4. VerificaÃ§Ã£o de seguranÃ§a

### Processo de Deploy
```bash
# 1. Build do projeto
npm run build

# 2. Testes
npm run test:all

# 3. Deploy dos servidores proxy
pm2 start ecosystem.config.js

# 4. Deploy do frontend
# Depende do seu provedor (Vercel, Netlify, etc)
```

## ğŸ¤ Guia de ContribuiÃ§Ã£o

### Processo de Desenvolvimento
1. Fork do projeto
2. CriaÃ§Ã£o de branch (`git checkout -b feature/nome-da-feature`)
3. Desenvolvimento com TDD
4. DocumentaÃ§Ã£o atualizada
5. Pull Request

### PadrÃµes de CÃ³digo
- ESLint config personalizado
- Prettier para formataÃ§Ã£o
- Conventional Commits
- Code Review obrigatÃ³rio

## ğŸ“š Recursos Adicionais

### DocumentaÃ§Ã£o Externa
- [React Docs](https://reactjs.org/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Supabase Docs](https://supabase.io/docs)
- [FFmpeg Docs](https://ffmpeg.org/documentation.html)

### Tutoriais e Guias
- [Guia de InÃ­cio RÃ¡pido](./docs/quickstart.md)
- [Guia de Desenvolvimento](./docs/development.md)
- [Guia de Deploy](./docs/deployment.md)
- [Troubleshooting](./docs/troubleshooting.md)

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## ğŸ“ Suporte

Para suporte, envie um email para [seu-email@dominio.com] ou abra uma issue no GitHub.

### ğŸ” Sistema de UsuÃ¡rios
- Multi-perfis por conta
- Controle parental
- PreferÃªncias por perfil
- HistÃ³rico de visualizaÃ§Ã£o
- RestriÃ§Ãµes de conteÃºdo
- SincronizaÃ§Ã£o entre dispositivos

### ğŸŒ Suporte a Idiomas
- Interface multi-idioma
- Legendas em mÃºltiplos idiomas
- Ãudio alternativo
- RTL (Right-to-Left) suporte
- TraduÃ§Ãµes automÃ¡ticas
- LocalizaÃ§Ã£o de conteÃºdo

### ğŸ“Š Analytics e EstatÃ­sticas
- Tempo de visualizaÃ§Ã£o
- Canais mais assistidos
- HorÃ¡rios populares
- RelatÃ³rios de uso
- MÃ©tricas de qualidade
- DiagnÃ³sticos de performance

### ğŸ›ï¸ IntegraÃ§Ãµes
- Suporte a EPG (Guia de ProgramaÃ§Ã£o)
- IntegraÃ§Ã£o com IMDb
- Compartilhamento social
- Chromecast/AirPlay
- Controles externos
- APIs de terceiros

### ğŸ’¾ GestÃ£o de Dados
- Backup automÃ¡tico
- SincronizaÃ§Ã£o na nuvem
- ExportaÃ§Ã£o de dados
- Limpeza automÃ¡tica
- CompressÃ£o inteligente
- RecuperaÃ§Ã£o de dados

### ğŸ“± Apps Companion
- Controle remoto via smartphone
- NotificaÃ§Ãµes push
- SincronizaÃ§Ã£o offline
- Segunda tela
- Widget para dispositivos mÃ³veis
- Quick actions

### ğŸ› ï¸ Ferramentas de DiagnÃ³stico
- Teste de velocidade
- VerificaÃ§Ã£o de conectividade
- Debug de streaming
- Logs detalhados
- RelatÃ³rios de erro
- Suporte remoto

### ğŸ® Atalhos e Controles
- Atalhos de teclado personalizÃ¡veis
- Gestos touch
- Controle por voz
- Atalhos globais
- Macros personalizadas
- IntegraÃ§Ã£o com controles externos

## ğŸ”§ Requisitos de Sistema

### Requisitos MÃ­nimos
- Processador: Dual Core 2.0 GHz
- MemÃ³ria RAM: 4GB
- Armazenamento: 50GB disponÃ­vel
- ConexÃ£o: 10 Mbps
- Sistema Operacional: Windows 10, macOS 10.15, Linux (kernel 5.0+)
- Navegador: Chrome 90+, Firefox 90+, Safari 15+

### Requisitos Recomendados
- Processador: Quad Core 3.0 GHz
- MemÃ³ria RAM: 8GB
- Armazenamento: 100GB SSD
- ConexÃ£o: 50 Mbps
- GPU: Dedicada com 2GB VRAM
- Sistema Operacional: Ãšltimas versÃµes

## ğŸ“± Compatibilidade

### Dispositivos Suportados
- Computadores (Windows, macOS, Linux)
- Smart TVs (Android TV, webOS, Tizen)
- Dispositivos mÃ³veis (iOS, Android)
- Consoles de games
- TV Boxes e Sticks
- Navegadores web

### Formatos Suportados
- VÃ­deo: MP4, MKV, AVI, MOV
- Ãudio: AAC, MP3, AC3, DTS
- Legendas: SRT, SSA, VTT
- Playlists: M3U, M3U8, W3U
- Streaming: HLS, DASH, RTMP
- Containers: TS, FLV, WebM

## ğŸ”’ Privacidade e SeguranÃ§a

### ProteÃ§Ã£o de Dados
- Criptografia end-to-end
- Armazenamento seguro
- AutenticaÃ§Ã£o em duas etapas
- Tokens de seguranÃ§a
- ProteÃ§Ã£o contra bots
- Backups criptografados

### Conformidade
- GDPR
- LGPD
- CCPA
- ISO 27001
- PCI DSS
- SOC 2

## ğŸ“ˆ Escalabilidade

### Limites do Sistema
- UsuÃ¡rios simultÃ¢neos: Ilimitado
- Canais por lista: 50.000+
- Listas por usuÃ¡rio: 100
- Perfis por conta: 5
- Dispositivos por conta: 10
- Streams simultÃ¢neos: 4

### Performance
- Tempo de carregamento < 2s
- Buffering < 500ms
- Troca de canais < 1s
- Uso de CPU < 30%
- Uso de memÃ³ria < 500MB
- Cache inteligente

## âœ… Checklist do Sistema

### âœ”ï¸ Funcionalidades Implementadas

#### Frontend
- [x] Interface base com React e TypeScript
- [x] Sistema de rotas
- [x] Player de vÃ­deo bÃ¡sico
- [x] Layout responsivo
- [x] Tema escuro/claro
- [x] Componentes UI base
- [x] Sistema de autenticaÃ§Ã£o
- [x] IntegraÃ§Ã£o com Supabase
- [x] GestÃ£o de estado com React Query
- [x] AnimaÃ§Ãµes com Framer Motion

#### Backend
- [x] Servidor Express bÃ¡sico
- [x] IntegraÃ§Ã£o com FFmpeg
- [x] Parser de playlists
- [x] Sistema de proxy bÃ¡sico
- [x] ConexÃ£o com Supabase
- [x] Endpoints principais
- [x] Middleware de autenticaÃ§Ã£o
- [x] Sistema de logs bÃ¡sico
- [x] Tratamento de erros
- [x] CORS configurado

#### Player
- [x] ReproduÃ§Ã£o de streams HLS
- [x] Controles bÃ¡sicos de reproduÃ§Ã£o
- [x] Ajuste de volume
- [x] Tela cheia
- [x] SeleÃ§Ã£o de qualidade
- [x] Buffer configurado
- [x] IntegraÃ§Ã£o com Plyr
- [x] Suporte a legendas
- [x] Picture-in-Picture
- [x] Atalhos de teclado bÃ¡sicos

### ğŸš§ Funcionalidades em Desenvolvimento

#### Frontend
- [ ] Sistema de busca avanÃ§ado
- [ ] Filtros complexos
- [ ] Sistema de favoritos
- [ ] HistÃ³rico de visualizaÃ§Ã£o
- [ ] Perfis de usuÃ¡rio
- [ ] RecomendaÃ§Ãµes personalizadas
- [ ] Compartilhamento social
- [ ] NotificaÃ§Ãµes push
- [ ] Modo offline
- [ ] PWA completo

#### Backend
- [ ] Sistema de cache avanÃ§ado
- [ ] Load balancing
- [ ] CompressÃ£o de streams
- [ ] TranscodificaÃ§Ã£o em tempo real
- [ ] Sistema de backup
- [ ] API documentada
- [ ] Testes automatizados
- [ ] CI/CD pipeline
- [ ] Monitoramento avanÃ§ado
- [ ] Rate limiting

#### Painel Admin
- [ ] Dashboard completo
- [ ] GestÃ£o de usuÃ¡rios
- [ ] Analytics avanÃ§ado
- [ ] RelatÃ³rios personalizados
- [ ] GestÃ£o de conteÃºdo
- [ ] Sistema de moderaÃ§Ã£o
- [ ] Controle de acesso
- [ ] Logs detalhados
- [ ] Backup e restauraÃ§Ã£o
- [ ] ConfiguraÃ§Ãµes avanÃ§adas

### ğŸ“‹ PrÃ³ximas ImplementaÃ§Ãµes (Prioridade)

#### Alta Prioridade
1. Sistema de cache avanÃ§ado
2. Dashboard administrativo
3. GestÃ£o de usuÃ¡rios
4. Sistema de busca avanÃ§ado
5. HistÃ³rico de visualizaÃ§Ã£o

#### MÃ©dia Prioridade
6. Sistema de recomendaÃ§Ã£o
7. Perfis de usuÃ¡rio
8. Analytics avanÃ§ado
9. Load balancing
10. NotificaÃ§Ãµes push

#### Baixa Prioridade
11. Compartilhamento social
12. PWA completo
13. Modo offline
14. TranscodificaÃ§Ã£o em tempo real
15. Sistema de moderaÃ§Ã£o

### âš ï¸ Pontos de AtenÃ§Ã£o

#### TÃ©cnicos
- OtimizaÃ§Ã£o de performance do player
- Melhorar gestÃ£o de memÃ³ria
- Reduzir tempo de carregamento
- Aumentar cobertura de testes
- DocumentaÃ§Ã£o tÃ©cnica completa

#### UsuÃ¡rio
- Melhorar UX do player
- Simplificar navegaÃ§Ã£o
- Adicionar mais feedbacks visuais
- Melhorar sistema de busca
- Tutorial interativo

#### Infraestrutura
- Implementar CDN
- Melhorar escalabilidade
- Backup automÃ¡tico
- Monitoramento 24/7
- Disaster recovery

### ğŸ“Š MÃ©tricas de Progresso

#### Frontend
- Implementado: 75%
- Em desenvolvimento: 15%
- Pendente: 10%

#### Backend
- Implementado: 60%
- Em desenvolvimento: 25%
- Pendente: 15%

#### Admin
- Implementado: 45%
- Em desenvolvimento: 35%
- Pendente: 20%

### ğŸ¯ Objetivos para PrÃ³xima Release

1. Implementar sistema de favoritos e histÃ³rico de visualizaÃ§Ã£o
2. Melhorar sistema de busca com filtros avanÃ§ados
3. Adicionar mais opÃ§Ãµes de personalizaÃ§Ã£o no player
4. Implementar sistema de recomendaÃ§Ãµes personalizado
5. Expandir funcionalidades do painel administrativo

## ğŸ”„ AtualizaÃ§Ãµes Recentes (Abril 2025)

#### âœ… Melhorias na PÃ¡gina de SÃ©ries
- [x] ImplementaÃ§Ã£o de agrupamento de sÃ©ries para evitar entradas duplicadas
- [x] AdiÃ§Ã£o de contadores para total de sÃ©ries e episÃ³dios no topo da pÃ¡gina
- [x] CorreÃ§Ã£o da navegaÃ§Ã£o para a pÃ¡gina de detalhes ao clicar em um card de sÃ©rie
- [x] RemoÃ§Ã£o do filtro de grupo "all" que causava problemas no carregamento
- [x] ImplementaÃ§Ã£o de modo de depuraÃ§Ã£o para alternar entre lista estÃ¡tica e busca dinÃ¢mica
- [x] SubstituiÃ§Ã£o da lista horizontal de botÃµes por um dropdown para melhor visualizaÃ§Ã£o em dispositivos mÃ³veis
- [x] ImplementaÃ§Ã£o de gerenciamento de estado para controle do dropdown
- [x] AdiÃ§Ã£o de detecÃ§Ã£o de clique fora para fechar o dropdown automaticamente

#### âœ… Melhorias na PÃ¡gina de TV ao Vivo
- [x] Ajuste da lÃ³gica de filtragem para remover grupos relacionados a filmes ou sÃ©ries
- [x] ImplementaÃ§Ã£o de lista completa de grupos para canais de TV ao vivo
- [x] ExclusÃ£o de grupos com termos como "SÃ‰RIES", "LANÃ‡AMENTOS" e "LEGENDADOS"
- [x] OtimizaÃ§Ã£o da exibiÃ§Ã£o de canais para melhor desempenho

#### âœ… Componente de Banner de Redes Sociais
- [x] CriaÃ§Ã£o de componente que busca e exibe links de redes sociais ativos
- [x] ImplementaÃ§Ã£o de tratamento de erros com mensagem de fallback
- [x] IntegraÃ§Ã£o com o painel administrativo para gerenciamento dos links

#### âœ… Player de VÃ­deo Otimizado
- [x] AdiÃ§Ã£o de atributos essenciais para iOS/Android: playsInline, muted, crossOrigin
- [x] ImplementaÃ§Ã£o de detecÃ§Ã£o automÃ¡tica de dispositivos mÃ³veis
- [x] SimplificaÃ§Ã£o dos controles em dispositivos mÃ³veis
- [x] AdiÃ§Ã£o de suporte a fullscreen nativo para iOS
- [x] ImplementaÃ§Ã£o de tratamento de erros com mensagens amigÃ¡veis
- [x] AdiÃ§Ã£o de tentativa de autoplay com fallback para reproduÃ§Ã£o manual

#### âœ… OtimizaÃ§Ã£o para Dispositivos MÃ³veis
- [x] ImplementaÃ§Ã£o de menu mobile especÃ­fico com posicionamento fixo
- [x] UtilizaÃ§Ã£o de classes de grid responsivas em todas as pÃ¡ginas
- [x] AdaptaÃ§Ã£o automÃ¡tica dos componentes de cartÃµes para diferentes tamanhos de tela
- [x] Headers fixos com z-index adequado para navegaÃ§Ã£o em dispositivos mÃ³veis
- [x] Barras de pesquisa e filtros otimizados para toque
- [x] ImplementaÃ§Ã£o de rolagem infinita para melhor desempenho

#### âœ… Painel Administrativo
- [x] ImplementaÃ§Ã£o completa do gerenciador de redes sociais
- [x] Interface para adicionar, editar e excluir links de redes sociais
- [x] Controle de status (ativo/inativo) para cada rede social
- [x] DefiniÃ§Ã£o de ordem de exibiÃ§Ã£o personalizada
- [x] IntegraÃ§Ã£o com o banco de dados Supabase

## ğŸ“ Sistema de Gerenciamento de PÃ¡ginas EstÃ¡ticas

Foi implementado um sistema completo para gerenciar o conteÃºdo das pÃ¡ginas estÃ¡ticas da plataforma, sem necessidade de modificar o cÃ³digo-fonte.

### Funcionalidades Principais

- **Painel Administrativo Dedicado**:
  - Interface intuitiva para ediÃ§Ã£o de pÃ¡ginas estÃ¡ticas
  - Editor de conteÃºdo HTML com formataÃ§Ã£o rica
  - PrÃ©-visualizaÃ§Ã£o instantÃ¢nea
  - OrganizaÃ§Ã£o clara das pÃ¡ginas disponÃ­veis

- **PÃ¡ginas GerenciÃ¡veis**:
  - Sobre NÃ³s
  - Contato
  - Termos de Uso
  - PolÃ­tica de Privacidade
  - Ajuda
  - FAQ

- **Armazenamento em Banco de Dados**:
  - ConteÃºdo armazenado no Supabase
  - Carregamento dinÃ¢mico do conteÃºdo
  - AtualizaÃ§Ã£o instantÃ¢nea apÃ³s ediÃ§Ã£o
  - Versionamento e histÃ³rico de alteraÃ§Ãµes

- **Renderizador Unificado**:
  - Componente StaticPageRenderer para exibiÃ§Ã£o consistente
  - Suporte a HTML complexo para formataÃ§Ã£o avanÃ§ada
  - Estados de carregamento e erro tratados elegantemente
  - Layout responsivo para todos os dispositivos

- **SeguranÃ§a**:
  - Row Level Security para proteÃ§Ã£o do conteÃºdo
  - Acesso restrito a administradores
  - ValidaÃ§Ã£o de conteÃºdo antes da persistÃªncia
  - SanitizaÃ§Ã£o de HTML para evitar scripts maliciosos

### ImplementaÃ§Ã£o TÃ©cnica

- **Banco de Dados**:
  - Tabela `static_pages` no Supabase
  - Campos para ID, tÃ­tulo, conteÃºdo e timestamps
  - PolÃ­ticas de seguranÃ§a definidas para controle de acesso

- **Frontend**:
  - Componente AdminPagesPage para interface de administraÃ§Ã£o
  - StaticPageRenderer para exibiÃ§Ã£o do conteÃºdo ao usuÃ¡rio
  - VersÃµes simplificadas das pÃ¡ginas estÃ¡ticas usando o renderizador

- **MigraÃ§Ã£o**:
  - Script SQL de migraÃ§Ã£o para criaÃ§Ã£o da estrutura
  - Dados iniciais para todas as pÃ¡ginas
  - Processo para atualizaÃ§Ã£o e backup de conteÃºdo

{{ ... }}
