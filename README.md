# Sistema IPTV - Plataforma de Streaming Avan√ßada

Um sistema completo de IPTV desenvolvido com tecnologias modernas, oferecendo uma experi√™ncia completa de streaming com interface moderna e responsiva.

## ‚ú® Funcionalidades Principais

### üé• Sistema de Streaming
- Reprodu√ß√£o de canais ao vivo em alta qualidade
- Suporte a m√∫ltiplas resolu√ß√µes (SD, HD, FHD, 4K)
- Adapta√ß√£o autom√°tica da qualidade baseada na conex√£o
- Controles avan√ßados de reprodu√ß√£o
- Picture-in-Picture (PIP)
- Closed Captions e legendas
- Timeshift para programa√ß√£o ao vivo

### üì∫ Gerenciamento de Conte√∫do
- Organiza√ß√£o por categorias (Filmes, S√©ries, Esportes, etc)
- Sistema de favoritos personalizado
- Hist√≥rico de visualiza√ß√£o
- Continua√ß√£o autom√°tica de reprodu√ß√£o
- Filtros avan√ßados de busca
- Tags e metadados personalizados

### üì± Interface Multi-Plataforma
- Design responsivo para todos dispositivos
- Temas claro/escuro
- Layout personaliz√°vel
- Atalhos de teclado
- Modo TV para smart TVs
- Controle remoto virtual

### üéÆ Controles e Personaliza√ß√£o
- Ajuste de qualidade manual/autom√°tico
- Controle de volume avan√ßado
- Modos de visualiza√ß√£o (normal, wide, stretch)
- Personaliza√ß√£o de buffer
- Ajustes de √°udio (equaliza√ß√£o, balan√ßo)
- Configura√ß√µes de rede

### üìä Sistema de Recomenda√ß√£o
- Recomenda√ß√µes baseadas em hist√≥rico
- Conte√∫do relacionado
- Tend√™ncias e populares
- Descoberta de novos conte√∫dos
- Perfis de interesse
- Recomenda√ß√µes sazonais

### üîç Preview e Informa√ß√µes
- Miniaturas din√¢micas
- Informa√ß√µes detalhadas do conte√∫do
- Classifica√ß√£o e reviews
- Programa√ß√£o futura
- Detalhes t√©cnicos da transmiss√£o
- Informa√ß√µes do EPG

### üìã Gerenciamento de Listas
- Importa√ß√£o de m√∫ltiplos formatos
- Valida√ß√£o autom√°tica de canais
- Backup e sincroniza√ß√£o
- Organiza√ß√£o personalizada
- Compartilhamento de listas
- Atualiza√ß√µes autom√°ticas

### ‚öôÔ∏è Configura√ß√µes Avan√ßadas
- Ajustes de cache
- Configura√ß√µes de rede
- Perfis de qualidade
- Personaliza√ß√£o da interface
- Backup e restaura√ß√£o
- Logs e diagn√≥sticos

## üëë Painel Administrativo

### üéõÔ∏è Dashboard Principal
- Vis√£o geral do sistema
- M√©tricas em tempo real
- Gr√°ficos de performance
- Alertas e notifica√ß√µes
- KPIs principais
- Status dos servi√ßos

### üë• Gest√£o de Usu√°rios
- Gerenciamento de contas
- N√≠veis de acesso
- Suspens√£o/Banimento
- Hist√≥rico de atividades
- Logs de acesso
- Gest√£o de permiss√µes

### üì∫ Gest√£o de Conte√∫do
- Gerenciamento de canais
- Categoriza√ß√£o de conte√∫do
- Modera√ß√£o de conte√∫do
- Upload de EPG
- Gest√£o de metadados
- Agendamento de conte√∫do

### üí≥ Gest√£o Financeira
- Controle de assinaturas
- Hist√≥rico de pagamentos
- Relat√≥rios financeiros
- Gest√£o de planos
- Cupons e descontos
- Integra√ß√µes com gateways

### üîç Monitoramento
- Status dos servidores
- Monitoramento de streams
- Logs do sistema
- Alertas autom√°ticos
- M√©tricas de qualidade
- Diagn√≥stico de problemas

### üìä Relat√≥rios Avan√ßados
- Relat√≥rios personalizados
- Exporta√ß√£o de dados
- An√°lise de audi√™ncia
- M√©tricas de engajamento
- Relat√≥rios de erro
- Tend√™ncias de uso

### ‚öôÔ∏è Configura√ß√µes do Sistema
- Configura√ß√µes gerais
- Limites do sistema
- Blacklist/Whitelist
- Regras de cache
- Pol√≠ticas de seguran√ßa
- Backup do sistema

### üõ†Ô∏è Ferramentas de Manuten√ß√£o
- Limpeza de cache
- Otimiza√ß√£o de banco
- Verifica√ß√£o de links
- Testes autom√°ticos
- Ferramentas de debug
- Manuten√ß√£o programada

### üì® Comunica√ß√£o
- Sistema de mensagens
- Notifica√ß√µes em massa
- Templates de email
- Avisos do sistema
- Suporte ao usu√°rio
- FAQ gerenci√°vel

### üîí Controle de Acesso
- Roles e permiss√µes
- Autentica√ß√£o em 2 fatores
- Logs de atividade
- Pol√≠ticas de senha
- Sess√µes ativas
- Bloqueio de IP

### üì± Gest√£o Multi-plataforma
- Controle de vers√µes
- Atualiza√ß√µes do sistema
- Configura√ß√µes por plataforma
- Recursos espec√≠ficos
- Compatibilidade
- Release notes

### üåê Gest√£o de Servidores
- Load balancing
- Gest√£o de recursos
- Escalabilidade
- Redund√¢ncia
- Manuten√ß√£o
- Backups

## üöÄ Stack Tecnol√≥gico Detalhado

### Frontend
- **React 18**
  - Context API para gerenciamento de estado
  - Hooks personalizados para l√≥gica reutiliz√°vel
  - React Query para cache e gerenciamento de dados
  - React Router v6 para navega√ß√£o

- **TypeScript**
  - Tipagem estrita
  - Interfaces bem definidas
  - Generics para componentes reutiliz√°veis

- **UI/UX**
  - Chakra UI para componentes base
  - Radix UI para primitivos acess√≠veis
  - Tailwind CSS para estiliza√ß√£o
  - Framer Motion para anima√ß√µes
  - Plyr para player de v√≠deo personalizado

### Backend
- **Supabase**
  - Autentica√ß√£o de usu√°rios
  - Armazenamento de metadados
  - Realtime subscriptions
  - Row Level Security

- **Express.js**
  - Middleware personalizado
  - Roteamento avan√ßado
  - Tratamento de erros
  - Logging detalhado

- **Processamento de M√≠dia**
  - FFmpeg para transcodifica√ß√£o
  - HLS.js para streaming adaptativo
  - Chunks otimizados
  - Qualidade adaptativa

## üìä Sistema de Estat√≠sticas e Otimiza√ß√£o de Carregamento

### Painel Administrativo Aprimorado

O painel administrativo foi aprimorado com um sistema completo de estat√≠sticas que fornece insights detalhados sobre o conte√∫do dispon√≠vel no banco de dados e o que est√° carregado no sistema.

#### Funcionalidades de Estat√≠sticas

- **Vis√£o Geral de Conte√∫do**:
  - Exibi√ß√£o do total de registros no banco de dados
  - Contagem de registros carregados no sistema
  - Percentual de carregamento por categoria
  - Monitoramento em tempo real do progresso de carregamento

- **Detalhamento por Categoria**:
  - Filmes: total no banco vs. carregados
  - S√©ries: total no banco vs. carregadas
  - TV ao Vivo: total no banco vs. carregados
  - Barras de progresso visuais para cada categoria

- **Carregamento Sob Demanda**:
  - Bot√£o para carregar mais conte√∫do diretamente do painel
  - Indicadores de progresso durante o carregamento
  - Atualiza√ß√£o autom√°tica das estat√≠sticas ap√≥s carregamento

### Otimiza√ß√µes de Desempenho

Para lidar com grandes volumes de dados (100MB+ de links), implementamos diversas otimiza√ß√µes:

#### Carregamento Eficiente de Dados

- **Pagina√ß√£o Otimizada**:
  - Carregamento de conte√∫do em lotes menores
  - Tamanho de p√°gina ajust√°vel para equilibrar desempenho e experi√™ncia
  - Suporte para navega√ß√£o entre p√°ginas de conte√∫do

- **Carregamento por Categorias**:
  - Separa√ß√£o do carregamento por tipo de conte√∫do (filmes, s√©ries, TV ao vivo)
  - Prioriza√ß√£o de conte√∫do mais acessado
  - Carregamento contextual baseado na navega√ß√£o do usu√°rio

- **Virtualiza√ß√£o de Listas**:
  - Renderiza√ß√£o apenas dos itens vis√≠veis na tela
  - Suporte para listas longas sem impacto no desempenho
  - Rolagem suave mesmo com milhares de itens

#### Monitoramento e Diagn√≥stico

- **Logs Detalhados**:
  - Sistema de logging abrangente para diagn√≥stico
  - Monitoramento do progresso de carregamento
  - Detec√ß√£o e relat√≥rio de erros

- **Verifica√ß√£o de Integridade**:
  - Valida√ß√£o de dados carregados
  - Detec√ß√£o de inconsist√™ncias
  - Recupera√ß√£o autom√°tica de falhas

### Arquitetura de Dados

- **Armazenamento Eficiente**:
  - Otimiza√ß√£o do formato de dados para reduzir overhead
  - Compress√£o de dados quando apropriado
  - Normaliza√ß√£o para evitar duplica√ß√£o

- **Consultas Otimizadas**:
  - Consultas seletivas que buscam apenas os dados necess√°rios
  - √çndices otimizados no banco de dados
  - Caching de consultas frequentes

### Como Usar o Sistema de Estat√≠sticas

1. Acesse o painel administrativo em `/admin`
2. Visualize as estat√≠sticas gerais na se√ß√£o "Estat√≠sticas de Conte√∫do"
3. Consulte o detalhamento por categoria na tabela abaixo
4. Use o bot√£o "Carregar Mais Conte√∫do" para carregar dados adicionais
5. Acompanhe o progresso atrav√©s das barras de progresso

### Solu√ß√£o de Problemas de Carregamento

Se o sistema n√£o estiver carregando todos os dados do banco:

1. Verifique os logs no console do navegador para identificar poss√≠veis erros
2. Confirme se o limite de pagina√ß√£o est√° configurado corretamente
3. Verifique se h√° filtros ativos que possam estar limitando os resultados
4. Tente carregar categorias espec√≠ficas em vez de todo o conte√∫do de uma vez
5. Monitore o uso de mem√≥ria do navegador durante o carregamento

### Considera√ß√µes T√©cnicas

- O sistema foi projetado para lidar com mais de 100.000 registros
- A pagina√ß√£o e virtualiza√ß√£o permitem uma experi√™ncia fluida mesmo com grandes volumes de dados
- As estat√≠sticas s√£o atualizadas em tempo real conforme o conte√∫do √© carregado
- O armazenamento local √© otimizado para evitar problemas de limite de tamanho

## üé¨ Sistema Avan√ßado de Players

### Arquitetura de Players Especializados

Nossa aplica√ß√£o implementa um sistema de players especializados para diferentes tipos de conte√∫do, garantindo a melhor experi√™ncia poss√≠vel para cada formato:

#### üì∫ VideoPlayer (TV ao vivo)

O VideoPlayer √© especializado em streaming ao vivo utilizando tecnologias HLS:

- **Caracter√≠sticas**:
  - Implementado com HLS.js para processamento de fluxos .m3u8
  - Configura√ß√£o adaptativa para streaming em tempo real
  - Otimizado para baixa lat√™ncia e reconex√£o autom√°tica
  - Detec√ß√£o e tratamento de interrup√ß√µes de stream
  - Modo de recupera√ß√£o para falhas de rede
  - Suporte para segmentos MPEG-TS

- **Configura√ß√µes de Performance**:
  - `enableWorker: true` para processamento em thread separada
  - `lowLatencyMode: true` para minimizar delay
  - `backBufferLength: 30` para economia de mem√≥ria
  - Tratamento avan√ßado de erros de rede e m√≠dia

#### üé• VODPlayer (Filmes e S√©ries)

O VODPlayer √© otimizado para conte√∫do sob demanda (Video On Demand):

- **Caracter√≠sticas**:
  - Acesso direto √† fonte MP4 sem necessidade de proxy
  - Extra√ß√£o autom√°tica da URL original a partir de URLs de proxy
  - Player HTML5 nativo para m√°xima compatibilidade
  - Interface com indicadores de carregamento
  - Sistema de recupera√ß√£o de erros com bot√£o de retry
  - Mensagens de erro amig√°veis

- **Vantagens**:
  - Carregamento mais r√°pido e direto dos v√≠deos
  - Menor uso de recursos do servidor
  - Melhor compatibilidade com diversos formatos MP4
  - Experi√™ncia mais fluida para conte√∫do VOD

### Sistema Inteligente de Detec√ß√£o de Conte√∫do

A plataforma detecta automaticamente o tipo de conte√∫do e seleciona o player mais adequado:

- **Detec√ß√£o Autom√°tica**:
  - Identifica√ß√£o do tipo de conte√∫do (filme, s√©rie, TV ao vivo)
  - Sele√ß√£o do player apropriado baseado no tipo
  - Configura√ß√£o autom√°tica de par√¢metros espec√≠ficos

- **Tratamento Especializado**:
  - TV ao vivo: VideoPlayer com HLS.js e proxy de streaming
  - Filmes/S√©ries: VODPlayer com acesso direto MP4

## üîÑ Sistema de Proxy Duplo para Streaming

### Arquitetura de Proxy Especializado

Nossa plataforma utiliza um sistema de proxy duplo, com servidores dedicados para diferentes tipos de conte√∫do:

#### üì° Live Proxy (Porta 3001)

Servidor proxy especializado em conte√∫do de TV ao vivo:

- **Caracter√≠sticas**:
  - Otimizado para streaming cont√≠nuo e de baixa lat√™ncia
  - Headers especializados para CORS e seguran√ßa
  - Suporte a diversos formatos de streaming ao vivo
  - Tratamento de redirecionamentos e autentica√ß√£o
  - Verifica√ß√£o de URLs para formato adequado

- **Funcionalidades**:
  - Endpoint `/stream` para transmiss√£o de conte√∫do ao vivo
  - Endpoint `/direct` para acesso direto com headers otimizados
  - Endpoint `/generate-url` para URLs alternativas de canais
  - Health check para monitoramento de status

#### üéûÔ∏è VOD Proxy (Porta 3002)

Servidor proxy especializado em conte√∫do sob demanda (filmes e s√©ries):

- **Caracter√≠sticas**:
  - Otimizado para arquivos MP4 e conte√∫do VOD
  - Sistema de cache para melhor desempenho
  - Convers√£o opcional via FFmpeg para compatibilidade
  - Stream controlado de arquivos grandes
  - Gerenciamento de conex√µes ativas

- **Funcionalidades**:
  - Cache de streams para economia de largura de banda
  - Convers√£o sob demanda de formatos n√£o suportados
  - Limpeza autom√°tica de streams inativos
  - Estat√≠sticas de uso e monitoramento

### Gerenciamento Centralizado de Proxies

O sistema inicia e gerencia automaticamente ambos os proxies:

- **Controle Unificado**:
  - Inicializa√ß√£o autom√°tica de ambos os servidores
  - Monitoramento de status e reinicializa√ß√£o em caso de falha
  - Logs unificados para diagn√≥stico de problemas
  - Encerramento gracioso em caso de shutdown

- **Configura√ß√£o Flex√≠vel**:
  - Vari√°veis de ambiente para portas dos servi√ßos
  - Facilidade de manuten√ß√£o e atualiza√ß√£o
  - Toler√¢ncia a falhas com reinicializa√ß√£o autom√°tica
  - Compatibilidade com ambiente de produ√ß√£o e desenvolvimento

## üìã Uso do Sistema

### Para Usu√°rios Finais

1. **Navegando no Conte√∫do**:
   - Acesse `/movies` para filmes
   - Acesse `/series` para s√©ries de TV
   - Acesse `/live` para canais de TV ao vivo

2. **Assistindo Conte√∫do**:
   - Clique em "Assistir" em qualquer item para iniciar a reprodu√ß√£o
   - Para filmes e s√©ries: reprodu√ß√£o direta sem proxy
   - Para TV ao vivo: reprodu√ß√£o via HLS com proxy de streaming

3. **Recursos durante a Reprodu√ß√£o**:
   - Controles padr√£o (play/pause, volume, fullscreen)
   - Op√ß√µes de qualidade de v√≠deo (quando dispon√≠vel)
   - Status de carregamento e bufferiza√ß√£o

### Para Desenvolvedores

1. **Iniciando os Servidores**:
   ```bash
   # Na pasta v20/src/server
   node --loader tsx start-proxies.ts
   ```

2. **Portas dos Servi√ßos**:
   - Live Proxy (TV ao vivo): `http://localhost:3001`
   - VOD Proxy (Filmes/S√©ries): `http://localhost:3002`

3. **Principais Endpoints**:
   - `/stream?url=URL_ENCODED_STREAM` - Para iniciar streaming de conte√∫do
   - `/health` - Para verificar status dos servidores
   - `/hls/STREAM_ID/index.m3u8` - Para acessar playlists HLS geradas

4. **Vari√°veis de Ambiente**:
   - `LIVE_PROXY_PORT` - Porta para o proxy de TV ao vivo (padr√£o: 3001)
   - `PROXY_PORT` - Porta para o proxy VOD (padr√£o: 3002)
   - `VITE_LIVE_PROXY_URL` - URL base para o proxy de TV ao vivo
   - `VITE_VOD_PROXY_URL` - URL base para o proxy VOD

## üîß Manuten√ß√£o e Solu√ß√£o de Problemas

### Problemas Comuns e Solu√ß√µes

1. **V√≠deo n√£o carrega**:
   - Para TV ao vivo: verifique se o proxy na porta 3001 est√° rodando
   - Para filmes/s√©ries: verifique se a URL MP4 original est√° acess√≠vel

2. **Erro de CORS**:
   - Verifique se os headers de CORS est√£o corretamente configurados nos proxies
   - Teste acesso direto √† URL de m√≠dia para confirmar disponibilidade

3. **Alto uso de CPU/mem√≥ria**:
   - Verifique n√∫mero de streams ativos no painel de administra√ß√£o
   - Considere ajustar par√¢metros de buffer e qualidade para streams frequentes

4. **Problemas de proxy**:
   - Verifique logs de cada servidor proxy para diagnosticar erros espec√≠ficos
   - Reinicie os servidores proxy se necess√°rio

### Logs e Monitoramento

Os proxies geram logs detalhados com informa√ß√µes importantes:

- **Formato dos Logs**:
  - `[VOD Proxy]` ou `[Live Proxy]` prefixando cada mensagem
  - Timestamp impl√≠cito nos logs
  - Detalhes da opera√ß√£o ou erro ocorrido

- **N√≠veis de Log**:
  - Informativo: opera√ß√µes normais
  - Aviso: problemas n√£o cr√≠ticos
  - Erro: falhas que requerem aten√ß√£o

## üìã Requisitos Detalhados

### Requisitos de Sistema
- Node.js v18.0.0 ou superior
- FFmpeg v4.4 ou superior
- M√≠nimo 4GB de RAM
- Armazenamento recomendado: 50GB+
- Conex√£o de internet est√°vel (100Mbps+ recomendado)

### Requisitos de Desenvolvimento
- Git
- VS Code (recomendado)
- Extens√µes recomendadas:
  - ESLint
  - Prettier
  - TypeScript + Webpack Problem Matchers
  - Tailwind CSS IntelliSense

## üõ†Ô∏è Guia de Instala√ß√£o Detalhado

1. **Prepara√ß√£o do Ambiente**
```bash
# Verifique a vers√£o do Node.js
node --version  # Deve ser 18.0.0 ou superior

# Verifique a instala√ß√£o do FFmpeg
ffmpeg -version

# Clone o reposit√≥rio
git clone [url-do-seu-repositorio]
cd project

# Instale as depend√™ncias
npm install
```

2. **Configura√ß√£o do Ambiente**
```bash
# Copie o arquivo de exemplo de ambiente
cp .env.example .env

# Estrutura do .env
VITE_SUPABASE_URL=sua_url_do_supabase
VITE_SUPABASE_ANON_KEY=sua_chave_anonima
VITE_API_URL=http://localhost:3000
VITE_PROXY_PORT=3001
VITE_VOD_PROXY_PORT=3002
VITE_LIVE_PROXY_PORT=3003
VITE_PLAYLIST_PROXY_PORT=3004
```

3. **Configura√ß√£o do FFmpeg**
```bash
# Instala√ß√£o autom√°tica do FFmpeg
node install-ffmpeg.js

# Verifica√ß√£o da instala√ß√£o
ffmpeg -encoders  # Deve listar os encoders dispon√≠veis
```

## üéÆ Scripts e Comandos Detalhados

### Desenvolvimento
```bash
# Inicia o ambiente de desenvolvimento completo
npm run dev  # Inicia frontend + todos os proxies

# Inicia servidores proxy individualmente
npm run proxy:vod     # Inicia servidor VOD
npm run proxy:live    # Inicia servidor Live
npm run proxy:playlist # Inicia servidor Playlist

# Desenvolvimento frontend apenas
npm run dev:frontend  # Inicia apenas o frontend
```

### Build e Produ√ß√£o
```bash
# Build do projeto
npm run build        # Cria build otimizada
npm run build:analyze # Cria build com an√°lise de bundle

# Preview da build
npm run preview      # Visualiza build local
```

### Testes e Qualidade
```bash
# Executa testes
npm run test        # Roda todos os testes
npm run test:watch  # Roda testes em modo watch
npm run test:coverage # Gera relat√≥rio de cobertura

# Linting e Formata√ß√£o
npm run lint       # Executa ESLint
npm run format     # Formata c√≥digo com Prettier
```

## üìÅ Estrutura do Projeto Detalhada

```
project/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/          # Componentes de UI b√°sicos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/      # Componentes do player
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/      # Componentes de layout
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/      # Componentes compartilhados
‚îÇ   ‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # Contexto de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/      # Contexto do player
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme/       # Contexto de tema
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/      # Hooks relacionados ao player
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # Hooks de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/         # Hooks de API
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # P√°ginas de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/      # P√°ginas do player
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/       # P√°ginas administrativas
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/         # Servi√ßos de API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage/     # Servi√ßos de armazenamento
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics/   # Servi√ßos de analytics
‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slices/      # Slices de estado
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middleware/  # Middleware personalizado
‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ global/      # Estilos globais
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ themes/      # Temas da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/         # Tipos da API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ player/      # Tipos do player
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common/      # Tipos comuns
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ format/      # Utilit√°rios de formata√ß√£o
‚îÇ       ‚îú‚îÄ‚îÄ validation/  # Utilit√°rios de valida√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ helpers/     # Helpers diversos
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ proxy/          # Servidores proxy
‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # Middleware do servidor
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # Utilit√°rios do servidor
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ assets/        # Recursos est√°ticos
‚îÇ   ‚îî‚îÄ‚îÄ icons/         # √çcones
‚îî‚îÄ‚îÄ supabase/
    ‚îú‚îÄ‚îÄ migrations/    # Migra√ß√µes do banco
    ‚îî‚îÄ‚îÄ functions/     # Fun√ß√µes do Supabase
```

## üîß Configura√ß√µes Avan√ßadas

### Configura√ß√£o do Player
```typescript
// Exemplo de configura√ß√£o do player
const playerConfig = {
  quality: {
    default: '720p',
    options: ['1080p', '720p', '480p', '360p']
  },
  buffering: {
    initialBuffer: 5,  // segundos
    bufferWhilePaused: true
  },
  controls: {
    autohide: 3000,   // ms
    keyboard: true
  }
};
```

### Configura√ß√£o dos Proxies
```javascript
// Exemplo de configura√ß√£o de proxy
const proxyConfig = {
  // Configura√ß√£o do proxy VOD
  vod: {
    port: process.env.VOD_PROXY_PORT,
    cache: {
      enabled: true,
      maxAge: 3600  // 1 hora
    },
    cors: {
      origin: '*',
      methods: ['GET', 'HEAD']
    }
  },
  // Configura√ß√£o do proxy Live
  live: {
    port: process.env.LIVE_PROXY_PORT,
    bufferSize: 1024 * 1024,  // 1MB
    timeout: 30000  // 30 segundos
  }
};
```

## üìä Monitoramento e Logs

### Logs do Sistema
- Logs de acesso
- Logs de erro
- Logs de performance
- M√©tricas de streaming

### Monitoramento
- Uso de CPU/Mem√≥ria
- Lat√™ncia de rede
- Taxa de erro
- Qualidade do streaming

## üîí Seguran√ßa

### Autentica√ß√£o
- JWT Tokens
- Refresh Tokens
- Rate Limiting
- Prote√ß√£o contra CSRF

### Streaming
- URLs assinadas
- Tokens de acesso
- Criptografia de stream
- Prote√ß√£o contra hotlinking

## üìà Performance

### Otimiza√ß√µes Frontend
- Code Splitting
- Lazy Loading
- Caching
- Compress√£o de assets

### Otimiza√ß√µes Backend
- Load Balancing
- Caching em mem√≥ria
- Otimiza√ß√£o de queries
- Compress√£o de resposta

## üåê Deploy

### Prepara√ß√£o
1. Configura√ß√£o de vari√°veis de ambiente
2. Build otimizada
3. Testes de integra√ß√£o
4. Verifica√ß√£o de seguran√ßa

### Processo de Deploy
```bash
# 1. Build do projeto
npm run build

# 2. Testes
npm run test:all

# 3. Deploy dos servidores proxy
pm2 start ecosystem.config.js

# 4. Deploy do frontend
# Depende do seu provedor (Vercel, Netlify, etc)
```

## ü§ù Guia de Contribui√ß√£o

### Processo de Desenvolvimento
1. Fork do projeto
2. Cria√ß√£o de branch (`git checkout -b feature/nome-da-feature`)
3. Desenvolvimento com TDD
4. Documenta√ß√£o atualizada
5. Pull Request

### Padr√µes de C√≥digo
- ESLint config personalizado
- Prettier para formata√ß√£o
- Conventional Commits
- Code Review obrigat√≥rio

## üìö Recursos Adicionais

### Documenta√ß√£o Externa
- [React Docs](https://reactjs.org/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Supabase Docs](https://supabase.io/docs)
- [FFmpeg Docs](https://ffmpeg.org/documentation.html)

### Tutoriais e Guias
- [Guia de In√≠cio R√°pido](./docs/quickstart.md)
- [Guia de Desenvolvimento](./docs/development.md)
- [Guia de Deploy](./docs/deployment.md)
- [Troubleshooting](./docs/troubleshooting.md)

## üìù Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üìû Suporte

Para suporte, envie um email para [seu-email@dominio.com] ou abra uma issue no GitHub.

### üîê Sistema de Usu√°rios
- Multi-perfis por conta
- Controle parental
- Prefer√™ncias por perfil
- Hist√≥rico de visualiza√ß√£o
- Restri√ß√µes de conte√∫do
- Sincroniza√ß√£o entre dispositivos

### üåê Suporte a Idiomas
- Interface multi-idioma
- Legendas em m√∫ltiplos idiomas
- √Åudio alternativo
- RTL (Right-to-Left) suporte
- Tradu√ß√µes autom√°ticas
- Localiza√ß√£o de conte√∫do

### üìä Analytics e Estat√≠sticas
- Tempo de visualiza√ß√£o
- Canais mais assistidos
- Hor√°rios populares
- Relat√≥rios de uso
- M√©tricas de qualidade
- Diagn√≥sticos de performance

### üéõÔ∏è Integra√ß√µes
- Suporte a EPG (Guia de Programa√ß√£o)
- Integra√ß√£o com IMDb
- Compartilhamento social
- Chromecast/AirPlay
- Controles externos
- APIs de terceiros

### üíæ Gest√£o de Dados
- Backup autom√°tico
- Sincroniza√ß√£o na nuvem
- Exporta√ß√£o de dados
- Limpeza autom√°tica
- Compress√£o inteligente
- Recupera√ß√£o de dados

### üì± Apps Companion
- Controle remoto via smartphone
- Notifica√ß√µes push
- Sincroniza√ß√£o offline
- Segunda tela
- Widget para dispositivos m√≥veis
- Quick actions

### üõ†Ô∏è Ferramentas de Diagn√≥stico
- Teste de velocidade
- Verifica√ß√£o de conectividade
- Debug de streaming
- Logs detalhados
- Relat√≥rios de erro
- Suporte remoto

### üéÆ Atalhos e Controles
- Atalhos de teclado personaliz√°veis
- Gestos touch
- Controle por voz
- Atalhos globais
- Macros personalizadas
- Integra√ß√£o com controles externos

## üîß Requisitos de Sistema

### Requisitos M√≠nimos
- Processador: Dual Core 2.0 GHz
- Mem√≥ria RAM: 4GB
- Armazenamento: 50GB dispon√≠vel
- Conex√£o: 10 Mbps
- Sistema Operacional: Windows 10, macOS 10.15, Linux (kernel 5.0+)
- Navegador: Chrome 90+, Firefox 90+, Safari 15+

### Requisitos Recomendados
- Processador: Quad Core 3.0 GHz
- Mem√≥ria RAM: 8GB
- Armazenamento: 100GB SSD
- Conex√£o: 50 Mbps
- GPU: Dedicada com 2GB VRAM
- Sistema Operacional: √öltimas vers√µes

## üì± Compatibilidade

### Dispositivos Suportados
- Computadores (Windows, macOS, Linux)
- Smart TVs (Android TV, webOS, Tizen)
- Dispositivos m√≥veis (iOS, Android)
- Consoles de games
- TV Boxes e Sticks
- Navegadores web

### Formatos Suportados
- V√≠deo: MP4, MKV, AVI, MOV
- √Åudio: AAC, MP3, AC3, DTS
- Legendas: SRT, SSA, VTT
- Playlists: M3U, M3U8, W3U
- Streaming: HLS, DASH, RTMP
- Containers: TS, FLV, WebM

## üîí Privacidade e Seguran√ßa

### Prote√ß√£o de Dados
- Criptografia end-to-end
- Armazenamento seguro
- Autentica√ß√£o em duas etapas
- Tokens de seguran√ßa
- Prote√ß√£o contra bots
- Backups criptografados

### Conformidade
- GDPR
- LGPD
- CCPA
- ISO 27001
- PCI DSS
- SOC 2

## üìà Escalabilidade

### Limites do Sistema
- Usu√°rios simult√¢neos: Ilimitado
- Canais por lista: 50.000+
- Listas por usu√°rio: 100
- Perfis por conta: 5
- Dispositivos por conta: 10
- Streams simult√¢neos: 4

### Performance
- Tempo de carregamento < 2s
- Buffering < 500ms
- Troca de canais < 1s
- Uso de CPU < 30%
- Uso de mem√≥ria < 500MB
- Cache inteligente

## ‚úÖ Checklist do Sistema

### ‚úîÔ∏è Funcionalidades Implementadas

#### Frontend
- [x] Interface base com React e TypeScript
- [x] Sistema de rotas
- [x] Player de v√≠deo b√°sico
- [x] Layout responsivo
- [x] Tema escuro/claro
- [x] Componentes UI base
- [x] Sistema de autentica√ß√£o
- [x] Integra√ß√£o com Supabase
- [x] Gest√£o de estado com React Query
- [x] Anima√ß√µes com Framer Motion

#### Backend
- [x] Servidor Express b√°sico
- [x] Integra√ß√£o com FFmpeg
- [x] Parser de playlists
- [x] Sistema de proxy b√°sico
- [x] Conex√£o com Supabase
- [x] Endpoints principais
- [x] Middleware de autentica√ß√£o
- [x] Sistema de logs b√°sico
- [x] Tratamento de erros
- [x] CORS configurado

#### Player
- [x] Reprodu√ß√£o de streams HLS
- [x] Controles b√°sicos de reprodu√ß√£o
- [x] Ajuste de volume
- [x] Tela cheia
- [x] Sele√ß√£o de qualidade
- [x] Buffer configurado
- [x] Integra√ß√£o com Plyr
- [x] Suporte a legendas
- [x] Picture-in-Picture
- [x] Atalhos de teclado b√°sicos

### üöß Funcionalidades em Desenvolvimento

#### Frontend
- [ ] Sistema de busca avan√ßado
- [ ] Filtros complexos
- [ ] Sistema de favoritos
- [ ] Hist√≥rico de visualiza√ß√£o
- [ ] Perfis de usu√°rio
- [ ] Recomenda√ß√µes personalizadas
- [ ] Compartilhamento social
- [ ] Notifica√ß√µes push
- [ ] Modo offline
- [ ] PWA completo

#### Backend
- [ ] Sistema de cache avan√ßado
- [ ] Load balancing
- [ ] Compress√£o de streams
- [ ] Transcodifica√ß√£o em tempo real
- [ ] Sistema de backup
- [ ] API documentada
- [ ] Testes automatizados
- [ ] CI/CD pipeline
- [ ] Monitoramento avan√ßado
- [ ] Rate limiting

#### Painel Admin
- [ ] Dashboard completo
- [ ] Gest√£o de usu√°rios
- [ ] Analytics avan√ßado
- [ ] Relat√≥rios personalizados
- [ ] Gest√£o de conte√∫do
- [ ] Sistema de modera√ß√£o
- [ ] Controle de acesso
- [ ] Logs detalhados
- [ ] Backup e restaura√ß√£o
- [ ] Configura√ß√µes avan√ßadas

### üìã Pr√≥ximas Implementa√ß√µes (Prioridade)

#### Alta Prioridade
1. Sistema de cache avan√ßado
2. Dashboard administrativo
3. Gest√£o de usu√°rios
4. Sistema de busca avan√ßado
5. Hist√≥rico de visualiza√ß√£o

#### M√©dia Prioridade
6. Sistema de recomenda√ß√£o
7. Perfis de usu√°rio
8. Analytics avan√ßado
9. Load balancing
10. Notifica√ß√µes push

#### Baixa Prioridade
11. Compartilhamento social
12. PWA completo
13. Modo offline
14. Transcodifica√ß√£o em tempo real
15. Sistema de modera√ß√£o

### ‚ö†Ô∏è Pontos de Aten√ß√£o

#### T√©cnicos
- Otimiza√ß√£o de performance do player
- Melhorar gest√£o de mem√≥ria
- Reduzir tempo de carregamento
- Aumentar cobertura de testes
- Documenta√ß√£o t√©cnica completa

#### Usu√°rio
- Melhorar UX do player
- Simplificar navega√ß√£o
- Adicionar mais feedbacks visuais
- Melhorar sistema de busca
- Tutorial interativo

#### Infraestrutura
- Implementar CDN
- Melhorar escalabilidade
- Backup autom√°tico
- Monitoramento 24/7
- Disaster recovery

### üìä M√©tricas de Progresso

#### Frontend
- Implementado: 75%
- Em desenvolvimento: 15%
- Pendente: 10%

#### Backend
- Implementado: 60%
- Em desenvolvimento: 25%
- Pendente: 15%

#### Admin
- Implementado: 45%
- Em desenvolvimento: 35%
- Pendente: 20%

### üéØ Objetivos para Pr√≥xima Release

1. Implementar sistema de favoritos e hist√≥rico de visualiza√ß√£o
2. Melhorar sistema de busca com filtros avan√ßados
3. Adicionar mais op√ß√µes de personaliza√ß√£o no player
4. Implementar sistema de recomenda√ß√µes personalizado
5. Expandir funcionalidades do painel administrativo

## üîÑ Atualiza√ß√µes Recentes (Abril 2025)

#### ‚úÖ Melhorias na P√°gina de S√©ries
- [x] Implementa√ß√£o de agrupamento de s√©ries para evitar entradas duplicadas
- [x] Adi√ß√£o de contadores para total de s√©ries e epis√≥dios no topo da p√°gina
- [x] Corre√ß√£o da navega√ß√£o para a p√°gina de detalhes ao clicar em um card de s√©rie
- [x] Remo√ß√£o do filtro de grupo "all" que causava problemas no carregamento
- [x] Implementa√ß√£o de modo de depura√ß√£o para alternar entre lista est√°tica e busca din√¢mica
- [x] Substitui√ß√£o da lista horizontal de bot√µes por um dropdown para melhor visualiza√ß√£o em dispositivos m√≥veis
- [x] Implementa√ß√£o de gerenciamento de estado para controle do dropdown
- [x] Adi√ß√£o de detec√ß√£o de clique fora para fechar o dropdown automaticamente

#### ‚úÖ Melhorias na P√°gina de TV ao Vivo
- [x] Ajuste da l√≥gica de filtragem para remover grupos relacionados a filmes ou s√©ries
- [x] Implementa√ß√£o de lista completa de grupos para canais de TV ao vivo
- [x] Exclus√£o de grupos com termos como "S√âRIES", "LAN√áAMENTOS" e "LEGENDADOS"
- [x] Otimiza√ß√£o da exibi√ß√£o de canais para melhor desempenho

#### ‚úÖ Componente de Banner de Redes Sociais
- [x] Cria√ß√£o de componente que busca e exibe links de redes sociais ativos
- [x] Implementa√ß√£o de tratamento de erros com mensagem de fallback
- [x] Integra√ß√£o com o painel administrativo para gerenciamento dos links

#### ‚úÖ Player de V√≠deo Otimizado
- [x] Adi√ß√£o de atributos essenciais para iOS/Android: playsInline, muted, crossOrigin
- [x] Implementa√ß√£o de detec√ß√£o autom√°tica de dispositivos m√≥veis
- [x] Simplifica√ß√£o dos controles em dispositivos m√≥veis
- [x] Adi√ß√£o de suporte a fullscreen nativo para iOS
- [x] Implementa√ß√£o de tratamento de erros com mensagens amig√°veis
- [x] Adi√ß√£o de tentativa de autoplay com fallback para reprodu√ß√£o manual

#### ‚úÖ Otimiza√ß√£o para Dispositivos M√≥veis
- [x] Implementa√ß√£o de menu mobile espec√≠fico com posicionamento fixo
- [x] Utiliza√ß√£o de classes de grid responsivas em todas as p√°ginas
- [x] Adapta√ß√£o autom√°tica dos componentes de cart√µes para diferentes tamanhos de tela
- [x] Headers fixos com z-index adequado para navega√ß√£o em dispositivos m√≥veis
- [x] Barras de pesquisa e filtros otimizados para toque
- [x] Implementa√ß√£o de rolagem infinita para melhor desempenho

#### ‚úÖ Painel Administrativo
- [x] Implementa√ß√£o completa do gerenciador de redes sociais
- [x] Interface para adicionar, editar e excluir links de redes sociais
- [x] Controle de status (ativo/inativo) para cada rede social
- [x] Defini√ß√£o de ordem de exibi√ß√£o personalizada
- [x] Integra√ß√£o com o banco de dados Supabase

## üìù Sistema de Gerenciamento de P√°ginas Est√°ticas

Foi implementado um sistema completo para gerenciar o conte√∫do das p√°ginas est√°ticas da plataforma, sem necessidade de modificar o c√≥digo-fonte.

### Funcionalidades Principais

- **Painel Administrativo Dedicado**:
  - Interface intuitiva para edi√ß√£o de p√°ginas est√°ticas
  - Editor de conte√∫do HTML com formata√ß√£o rica
  - Pr√©-visualiza√ß√£o instant√¢nea
  - Organiza√ß√£o clara das p√°ginas dispon√≠veis

- **P√°ginas Gerenci√°veis**:
  - Sobre N√≥s
  - Contato
  - Termos de Uso
  - Pol√≠tica de Privacidade
  - Ajuda
  - FAQ

- **Armazenamento em Banco de Dados**:
  - Conte√∫do armazenado no Supabase
  - Carregamento din√¢mico do conte√∫do
  - Atualiza√ß√£o instant√¢nea ap√≥s edi√ß√£o
  - Versionamento e hist√≥rico de altera√ß√µes

- **Renderizador Unificado**:
  - Componente StaticPageRenderer para exibi√ß√£o consistente
  - Suporte a HTML complexo para formata√ß√£o avan√ßada
  - Estados de carregamento e erro tratados elegantemente
  - Layout responsivo para todos os dispositivos

- **Seguran√ßa**:
  - Row Level Security para prote√ß√£o do conte√∫do
  - Acesso restrito a administradores
  - Valida√ß√£o de conte√∫do antes da persist√™ncia
  - Sanitiza√ß√£o de HTML para evitar scripts maliciosos

### Implementa√ß√£o T√©cnica

- **Banco de Dados**:
  - Tabela `static_pages` no Supabase
  - Campos para ID, t√≠tulo, conte√∫do e timestamps
  - Pol√≠ticas de seguran√ßa definidas para controle de acesso

- **Frontend**:
  - Componente AdminPagesPage para interface de administra√ß√£o
  - StaticPageRenderer para exibi√ß√£o do conte√∫do ao usu√°rio
  - Vers√µes simplificadas das p√°ginas est√°ticas usando o renderizador

- **Migra√ß√£o**:
  - Script SQL de migra√ß√£o para cria√ß√£o da estrutura
  - Dados iniciais para todas as p√°ginas
  - Processo para atualiza√ß√£o e backup de conte√∫do

{{ ... }}
